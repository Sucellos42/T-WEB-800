services:
  api:
    container_name: nestjs
    image: nestjs-dev
    restart: unless-stopped
    build:
      context: ./backend
      dockerfile: Dockerfile
      # âœ¨ Target the dev stage
      target: dev
    # Mount host directory to docker container to support watch mode
    volumes:
      - .:/app
      # This ensures that the NestJS container manages the node_modules folder
      # rather than synchronizes it with the host machine
      - /app/node_modules
    env_file:
      - docker.env
    ports:
      - 3333:3000
    #    networks:
    #      - nest
    #    depends_on:
    #      - postgres
    command: pnpm start:dev
#    command: tail -f /dev/null

  # ...other services
